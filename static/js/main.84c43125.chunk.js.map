{"version":3,"sources":["contexts/DynamicContext.js","contexts/DataContext.js","utils/calculations.js","components/Input.js","components/Range.js","components/Select.js","components/Form.js","components/Result.js","components/CalculatorHeader.js","components/Calculator.js","components/PrintButton.js","components/App.js","serviceWorker.js","index.js"],"names":["DynamicContext","React","createContext","DataContext","isLeapYear","year","calculations","sumValue","rate","days","currentYear","Date","getFullYear","total","Math","ceil","toLocaleString","Input","props","heading","param","min","max","userInput","disabled","onInputChange","onInputBlur","className","htmlFor","id","name","type","value","abs","onBlur","evt","onChange","Range","onRangeChange","step","Number","Select","deposits","selectedOption","onSelect","placeholder","map","deposit","key","code","Form","useContext","minSum","maxSum","minPeriod","maxPeriod","userSumInput","userPeriodInput","periodValue","Result","n","period","sum","CalculatorHeader","initialSum","totalSum","Calculator","PrintButton","onClick","btnDisabled","App","useState","setSum","setRate","setSelectedOption","selectedDeposit","setSelectedDeposit","setMinSum","setMaxSum","setMinPeriod","setMaxPeriod","setSumValue","setPeriodValue","selectedPeriod","setSelectedPeriod","setUserSumInput","setUserPeriodInput","setDisabled","setBtnDisabled","useEffect","filter","period_from","currentPeriodSumsAndRate","length","summs_and_rate","summ_from","sums","currentSum","Provider","target","currentDeposit","find","current","depositParams","firstParam","lastParam","setMinAndMax","window","print","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.84c43125.chunk.js","sourcesContent":["import React from 'react';\n\nexport const DynamicContext = React.createContext();","import React from 'react';\n\nexport const DataContext = React.createContext();","const daysOfAYear = (year) => isLeapYear(year) ? 366 : 365;\nconst isLeapYear = (year) => year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0);\n\nexport default function calculations(sumValue, rate, days) {\n  const currentYear = new Date().getFullYear();\n  const total = +sumValue + +(sumValue * (rate / 100) * days) / (daysOfAYear(currentYear));\n  return Math.ceil(total).toLocaleString();\n}","import React from 'react';\n\nexport default function Input(props) {\n  const { heading, param, min, max, userInput, disabled, onInputChange, onInputBlur } = props;\n\n  function handleChange(evt) {\n    onInputChange(evt);\n  }\n\n  function handleBlur(evt) {\n    onInputBlur(evt);\n  }\n\n  return (\n    <label\n      className='input__heading'\n      htmlFor={param}>\n      <span className='label'>{heading}</span>\n      <input\n        className='input'\n        id={`${param}Input`}\n        name={param}\n        type='number'\n        min={min}\n        max={max}\n        value={userInput < 0 ? Math.abs((userInput)) : (userInput !== 0 ? userInput : '')}\n        disabled={disabled}\n        onBlur={handleBlur}\n        onChange={handleChange} />\n    </label>\n  )\n}","import React from 'react';\n\nexport default function Range(props) {\n  const { param, min, max, value, disabled, onRangeChange } = props;\n\n  function handleChange(evt) {\n    onRangeChange(evt);\n  }\n\n  return (\n\n    <label\n      className='range__label'\n      htmlFor={param}>\n      <input\n        className='range'\n        id={param}\n        name={param}\n        type='range'\n        step='1'\n        min={min}\n        max={max}\n        value={value}\n        disabled={disabled}\n        onChange={handleChange} />\n      <div className='range__minmax'>\n        <span>{!min ? '' : `от ${Number(min).toLocaleString()} ${param === 'sum' ? '\\u20bd' : 'дня'}`}</span>\n        <span>{!max ? '' : `свыше ${Number(max).toLocaleString()} ${param === 'sum' ? '\\u20bd' : 'дня'}`}</span>\n      </div>\n    </label>\n  )\n}","import React from 'react';\n\nexport default function Select(props) {\n  const { deposits, selectedOption, onSelect } = props;\n\n  function handleSelect(evt) {\n    onSelect(evt);\n  }\n\n  return (\n    <label\n      htmlFor='select'\n      className='input__heading'>\n      <span className='label'>Вклад</span>\n      <select\n        className='select input'\n        id='select'\n        value={selectedOption}\n        onChange={handleSelect}\n        placeholder='Выберите тарифный план'>\n        <option\n          disabled\n          value=''>Выберите план</option>\n        {\n          deposits.map((deposit) => (\n            <option\n              key={deposit.code}\n              value={deposit.code}>\n              {deposit.name}\n            </option>\n          ))\n        }\n      </select>\n    </label>\n  )\n}","import React, { useContext } from 'react';\nimport Input from './Input';\nimport Range from './Range';\nimport Select from './Select';\nimport { DynamicContext } from '../contexts/DynamicContext';\nimport { DataContext } from '../contexts/DataContext';\n\nexport default function Form() {\n  const { selectedOption,\n    onSelect,\n    minSum,\n    maxSum,\n    minPeriod,\n    maxPeriod,\n    userSumInput,\n    userPeriodInput,\n    sumValue,\n    periodValue,\n    onInputBlur,\n    onInputChange,\n    onRangeChange,\n    disabled } = useContext(DynamicContext);\n\n  const deposits = useContext(DataContext);\n\n  return (\n    <form className='form'>\n      <Select\n        deposits={deposits}\n        selectedOption={selectedOption}\n        onSelect={onSelect} />\n      <Input\n        heading='Сумма вклада'\n        param='sum'\n        min={minSum}\n        max={maxSum}\n        onInputBlur={onInputBlur}\n        onInputChange={onInputChange}\n        userInput={userSumInput}\n        disabled={disabled} />\n      <Range\n        heading='Сумма вклада'\n        param='sum'\n        min={minSum}\n        max={maxSum}\n        onRangeChange={onRangeChange}\n        value={sumValue}\n        disabled={disabled} />\n      <Input\n        heading='Срок вклада'\n        param='period'\n        min={minPeriod}\n        max={maxPeriod}\n        userInput={userPeriodInput}\n        onInputBlur={onInputBlur}\n        onInputChange={onInputChange}\n        disabled={disabled} />\n      <Range\n        heading='Срок вклада'\n        param='period'\n        min={minPeriod}\n        max={maxPeriod}\n        value={periodValue}\n        onRangeChange={onRangeChange}\n        disabled={disabled} />\n    </form>\n  )\n}","import React from 'react';\n\nexport default function Result(props) {\n  const { deposit, period, sum, rate } = props;\n\n  function decl(n, titles) {\n    return titles[n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2];\n  }\n\n  return (\n    <div className='result'>\n      <div className='result__block'>\n        <p className='label'>Тарифный план</p>\n        <p className='result__value'>{deposit}</p>\n      </div>\n      <div className='result__block'>\n        <p className='label'>Ставка</p>\n        <p className='result__value'>{rate !== 0 && `${rate} \\u0025`}</p>\n      </div>\n      <div className='result__block'>\n        <p className='label'>Срок</p>\n        <p className='result__value'>{period !== 0 && `${period} ${decl(period, ['день', 'дня', 'дней'])}`}</p>\n      </div>\n      <div className='result__block'>\n        <p className='label'>Сумма</p>\n        <p className='result__value'>{sum !== 0 && `${sum} \t\\u20bd`}</p>\n      </div>\n\n    </div>\n  )\n}","import React from 'react';\n\nexport default function CalculatorHeader(props) {\n  const { initialSum, totalSum } = props;\n\n  return (\n    <div className='hdr'>\n      <div>\n        <span className='hdr__text'>Вы вносите</span>\n        <div className='hdr__heading hdr__heading_initial'>\n          {initialSum !== 0 && Number(initialSum).toLocaleString()}\n        </div>\n      </div>\n      <div>\n        <span className='hdr__text'>Вы получите</span>\n        <div className='hdr__heading hdr__heading_total'>{totalSum !== 0 && totalSum}</div>\n      </div>\n    </div>\n  )\n}","import React, { useContext } from 'react';\nimport Form from './Form';\nimport Result from './Result';\nimport CalculatorHeader from './CalculatorHeader';\nimport { DynamicContext } from '../contexts/DynamicContext';\n\nexport default function Calculator() {\n  const { sumValue, period, sum, rate, deposit } = useContext(DynamicContext);\n\n  return (\n    <div className='calculator'>\n      <CalculatorHeader\n        initialSum={sumValue}\n        totalSum={sum} />\n      <Form />\n      <Result\n        deposit={deposit}\n        period={period}\n        sum={sum}\n        rate={rate} />\n    </div>\n  )\n}","import React from 'react';\n\nexport default function PrintButton(props) {\n  const { onClick, btnDisabled } = props;\n\n  return (\n    <button\n      className='button'\n      type='button'\n      disabled={btnDisabled}\n      onClick={onClick}>Распечатать</button>\n  )\n}","import React, { useState, useEffect } from 'react';\nimport { DynamicContext } from '../contexts/DynamicContext';\nimport { DataContext } from '../contexts/DataContext';\nimport { deposits } from '../data/depcalc.json';\nimport calculations from '../utils/calculations';\nimport Calculator from './Calculator';\nimport PrintButton from './PrintButton';\n\nfunction App() {\n  const [sum, setSum] = useState(0)\n  const [rate, setRate] = useState(0);\n  const [selectedOption, setSelectedOption] = useState('');\n  const [selectedDeposit, setSelectedDeposit] = useState([]);\n  const [minSum, setMinSum] = useState(0);\n  const [maxSum, setMaxSum] = useState(0);\n  const [minPeriod, setMinPeriod] = useState(0);\n  const [maxPeriod, setMaxPeriod] = useState(0);\n  const [sumValue, setSumValue] = useState(0);\n  const [periodValue, setPeriodValue] = useState(0);\n  const [selectedPeriod, setSelectedPeriod] = useState(0);\n  const [userSumInput, setUserSumInput] = useState(0);\n  const [userPeriodInput, setUserPeriodInput] = useState(0);\n  const [disabled, setDisabled] = useState(true);\n  const [btnDisabled, setBtnDisabled] = useState(true);\n\n  useEffect(() => {\n    if (periodValue && selectedDeposit) {\n      const depositParams = selectedDeposit.param;\n      const days = depositParams.filter((param) => param.period_from <= +periodValue);\n      const currentPeriodSumsAndRate = days[days.length - 1].summs_and_rate;\n      setSelectedPeriod(currentPeriodSumsAndRate);\n      setMinSum(currentPeriodSumsAndRate[0].summ_from);\n      setMaxSum(currentPeriodSumsAndRate[currentPeriodSumsAndRate.length - 1].summ_from);\n    }\n  }, [periodValue, selectedDeposit]);\n\n  useEffect(() => {\n    if (selectedPeriod && sumValue) {\n      const sums = selectedPeriod.filter((sum) => {\n        if (sumValue < selectedPeriod[0].summ_from) {\n          return selectedPeriod[0];\n        }\n        return sum.summ_from <= sumValue;\n      });\n      const currentSum = sums[sums.length - 1].rate;\n      setRate(currentSum);\n      setSum(calculations(sumValue, rate, periodValue));\n    }\n  }, [periodValue, rate, selectedPeriod, sum, sumValue]);\n\n  useEffect(() => {\n    if (sumValue < minSum && userSumInput < minSum) {\n      setSumValue(minSum);\n      setUserSumInput(minSum);\n    }\n  }, [sumValue, minSum, userSumInput])\n\n  function hanldeSelectDeposit(evt) {\n    setSelectedOption(evt.target.value);\n    const currentDeposit = deposits.find((deposit) => deposit.code === evt.target.value);\n    setSelectedDeposit(currentDeposit);\n    setMinAndMax(currentDeposit);\n    setDisabled(false);\n    setBtnDisabled(false);\n  }\n\n  function setMinAndMax(current) {\n    const depositParams = current.param;\n    const firstParam = depositParams[0];\n    const lastParam = depositParams[depositParams.length - 1];\n    setMinPeriod(firstParam.period_from);\n    setMaxPeriod(lastParam.period_from);\n    setPeriodValue(firstParam.period_from);\n    setSumValue(firstParam.summs_and_rate[0].summ_from);\n    setUserSumInput(firstParam.summs_and_rate[0].summ_from);\n    setUserPeriodInput(firstParam.period_from);\n    setRate(firstParam.summs_and_rate[0].rate);\n  }\n\n  function handleRangeChange(evt) {\n    if (evt.target.id === 'sum') {\n      setSumValue(evt.target.value);\n      setUserSumInput(evt.target.value);\n    } else {\n      setPeriodValue(evt.target.value);\n      setUserPeriodInput(evt.target.value);\n    }\n  }\n\n  function handleInputChange(evt) {\n    if (evt.target.id === 'sumInput') {\n      setUserSumInput(evt.target.value);\n      evt.target.value > minSum ? setSumValue(evt.target.value) : setSumValue(minSum);\n      return;\n    }\n    setUserPeriodInput(evt.target.value);\n    evt.target.value < minPeriod ? setPeriodValue(minPeriod) : setPeriodValue(evt.target.value);\n  }\n\n  function handleInputBlur(evt) {\n    if (evt.target.id === 'sumInput') {\n      if (userSumInput < minSum) {\n        setUserSumInput(minSum);\n      }\n      else {\n        setUserSumInput(evt.target.value);\n        setSumValue(evt.target.value);\n      }\n      return;\n    }\n    setUserPeriodInput(evt.target.value);\n    evt.target.value < minPeriod ? setPeriodValue(minPeriod) : setPeriodValue(evt.target.value);\n  }\n\n  function print() {\n    window.print();\n  }\n\n  return (\n    <DataContext.Provider value={deposits}>\n      <DynamicContext.Provider value={{\n        deposit: selectedDeposit.name,\n        selectedOption,\n        onSelect: hanldeSelectDeposit,\n        minSum,\n        maxSum,\n        minPeriod,\n        maxPeriod,\n        userSumInput,\n        userPeriodInput,\n        sumValue,\n        periodValue,\n        onInputBlur: handleInputBlur,\n        onInputChange: handleInputChange,\n        onRangeChange: handleRangeChange,\n        period: periodValue,\n        sum,\n        rate,\n        disabled\n      }}>\n        <div className=\"page\">\n          <Calculator />\n          <PrintButton\n            onClick={print}\n            btnDisabled={btnDisabled} />\n        </div>\n      </DynamicContext.Provider>\n    </DataContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}